<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×”××©×ª×œ×”</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700;900&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
:root {
  --green:#3a8c3a; --green-dark:#2a6a2a;
  --green-pale:#f0f8f0; --orange:#e07010;
  --text:#1a2e1a; --white:#fff;
}
body { font-family:'Heebo',sans-serif; background:#1a1a1a; min-height:100vh; display:flex; align-items:center; justify-content:center; }

.frame { width:390px; height:844px; background:#0a0a0a; border-radius:54px; padding:14px;
  box-shadow:0 0 0 2px #333,0 0 0 6px #1a1a1a,0 40px 100px rgba(0,0,0,.8);
  position:relative; display:flex; flex-direction:column; }
.notch { position:absolute; top:20px; left:50%; transform:translateX(-50%); width:120px; height:34px; background:#0a0a0a; border-radius:20px; z-index:100; }
.btn-r  { position:absolute; right:-3px; top:160px; width:4px; height:80px; background:#444; border-radius:2px 0 0 2px; }
.btn-l1 { position:absolute; left:-3px; top:130px; width:4px; height:40px; background:#444; border-radius:0 2px 2px 0; }
.btn-l2 { position:absolute; left:-3px; top:185px; width:4px; height:60px; background:#444; border-radius:0 2px 2px 0; }
.btn-l3 { position:absolute; left:-3px; top:260px; width:4px; height:60px; background:#444; border-radius:0 2px 2px 0; }

.screen { flex:1; background:#f5f7f5; border-radius:42px; overflow:hidden; display:flex; flex-direction:column; position:relative; }

.topbar { background:var(--white); padding:52px 20px 14px; display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #e8eee8; flex-shrink:0; }
.topbar-title { font-size:22px; font-weight:900; color:var(--green-dark); }
.topbar-cart { position:relative; background:none; border:none; font-size:26px; cursor:pointer; }
.cart-badge { position:absolute; top:-4px; left:-6px; background:#e03030; color:#fff; border-radius:50%; width:18px; height:18px; font-size:10px; font-weight:900; display:flex; align-items:center; justify-content:center; }

.view { display:none; flex:1; flex-direction:column; overflow:hidden; }
.view.active { display:flex; }

/* CATS */
.cat-scroll { flex:1; overflow-y:auto; padding:14px 14px 8px; display:flex; flex-direction:column; gap:10px; }
.cat-item { background:var(--white); border-radius:18px; overflow:hidden; cursor:pointer; border:2px solid #e8eee8;
  box-shadow:0 2px 10px rgba(0,0,0,.05); display:flex; align-items:center; height:90px; transition:all .15s; }
.cat-item:active { transform:scale(.97); border-color:var(--green); }
.cat-thumb { width:110px; height:100%; flex-shrink:0; overflow:hidden; position:relative; background:var(--green-pale); }
.cat-thumb img { width:100%; height:100%; object-fit:cover; display:block; }
.thumb-loading { width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
.thumb-spinner { width:24px; height:24px; border:3px solid #ddd; border-top-color:var(--green); border-radius:50%; animation:spin .8s linear infinite; }
@keyframes spin { to { transform:rotate(360deg); } }
.cat-text { padding:0 14px; flex:1; }
.cat-name  { font-size:17px; font-weight:900; color:var(--text); }
.cat-count { font-size:13px; color:#999; margin-top:3px; }
.cat-arrow { font-size:20px; color:#ccc; padding-left:12px; }

/* PROD LIST */
.back-bar { background:var(--white); padding:12px 16px; display:flex; align-items:center; border-bottom:1px solid #e8eee8; flex-shrink:0; }
.back-btn  { background:none; border:none; font-size:15px; font-weight:700; color:var(--green-dark); cursor:pointer; font-family:'Heebo',sans-serif; }
.back-title { font-size:17px; font-weight:900; color:var(--text); flex:1; text-align:center; }

.prod-scroll { flex:1; overflow-y:auto; padding:12px 12px 6px; display:flex; flex-direction:column; gap:10px; }
.prod-item { background:var(--white); border-radius:16px; overflow:hidden; display:flex; align-items:center;
  cursor:pointer; border:2px solid #e8eee8; box-shadow:0 2px 8px rgba(0,0,0,.04); height:82px; transition:all .15s; }
.prod-item:active { transform:scale(.97); border-color:var(--green); }
.prod-thumb { width:90px; height:100%; flex-shrink:0; overflow:hidden; background:var(--green-pale); position:relative; }
.prod-thumb img { width:100%; height:100%; object-fit:cover; display:block; }
.prod-info  { padding:0 12px; flex:1; min-width:0; }
.prod-name  { font-size:15px; font-weight:700; color:var(--text); }
.prod-sub   { font-size:12px; color:#999; margin-top:3px; }
.prod-price { font-size:17px; font-weight:900; color:var(--orange); padding-left:14px; flex-shrink:0; }

/* DETAIL */
.detail-view { background:var(--white); }
.detail-scroll { flex:1; overflow-y:auto; }

.detail-hero { width:100%; height:270px; position:relative; overflow:hidden; background:var(--green-pale); display:flex; align-items:center; justify-content:center; }
.detail-hero img { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
.detail-hero::after { content:''; position:absolute; inset:0; background:linear-gradient(to top,rgba(0,0,0,.4) 0%,transparent 55%); pointer-events:none; z-index:2; }
.hero-loading { display:flex; flex-direction:column; align-items:center; gap:10px; color:#aaa; font-size:13px; }
.hero-spinner { width:36px; height:36px; border:4px solid #ddd; border-top-color:var(--green); border-radius:50%; animation:spin .8s linear infinite; }

.img-nav { position:absolute; bottom:14px; width:100%; display:flex; justify-content:space-between; align-items:center; padding:0 14px; z-index:3; }
.img-nav-btn { width:40px; height:32px; background:rgba(255,255,255,.88); border:none; border-radius:20px; font-size:16px; font-weight:700; cursor:pointer; color:#333; box-shadow:0 2px 8px rgba(0,0,0,.2); display:flex; align-items:center; justify-content:center; }
.img-nav-btn:disabled { opacity:.3; }
.dots { display:flex; gap:5px; }
.dot { width:7px; height:7px; border-radius:50%; background:rgba(255,255,255,.45); transition:background .2s; }
.dot.active { background:#fff; }

.detail-body { padding:20px 20px 10px; }
.detail-name  { font-size:26px; font-weight:900; color:var(--green-dark); margin-bottom:4px; }
.detail-price { font-size:28px; font-weight:900; color:var(--orange); margin-bottom:18px; }
.detail-attrs { background:var(--green-pale); border-radius:14px; padding:14px 16px; display:flex; flex-direction:column; gap:11px; margin-bottom:16px; }
.d-attr { display:flex; align-items:center; justify-content:space-between; font-size:15px; }
.d-label { color:#777; font-weight:500; }
.d-val   { font-weight:700; color:var(--text); display:flex; align-items:center; gap:6px; }
.detail-desc { font-size:14px; color:#666; line-height:1.75; border-top:1px solid #eee; padding-top:14px; padding-bottom:16px; }

.detail-footer { padding:12px 16px 20px; background:var(--white); border-top:1px solid #eee; flex-shrink:0; }
.add-btn { width:100%; padding:16px; background:var(--green); color:#fff; border:none; border-radius:14px;
  font-family:'Heebo',sans-serif; font-size:18px; font-weight:900; cursor:pointer;
  box-shadow:0 4px 16px rgba(58,140,58,.3); transition:background .15s; }
.add-btn:active { transform:scale(.98); }
.add-btn.added { background:#5aaa5a; }

.bottom-nav { background:var(--white); border-top:1px solid #e8eee8; display:flex; padding:8px 0 20px; flex-shrink:0; }
.bnav-btn { flex:1; display:flex; flex-direction:column; align-items:center; gap:3px; background:none; border:none;
  cursor:pointer; font-family:'Heebo',sans-serif; font-size:11px; color:#aaa; padding:4px 0; }
.bnav-btn.active { color:var(--green-dark); }
.bnav-icon { font-size:22px; }

.toast { position:absolute; bottom:90px; left:50%; transform:translateX(-50%) translateY(80px);
  background:var(--green-dark); color:#fff; padding:10px 20px; border-radius:40px;
  font-family:'Heebo',sans-serif; font-weight:700; font-size:14px; transition:transform .25s ease;
  z-index:999; pointer-events:none; white-space:nowrap; }
.toast.show { transform:translateX(-50%) translateY(0); }
</style>
</head>
<body>

<div class="frame">
  <div class="btn-r"></div><div class="btn-l1"></div><div class="btn-l2"></div><div class="btn-l3"></div>
  <div class="notch"></div>
  <div class="screen">
    <div class="topbar">
      <div class="topbar-title">ğŸŒ¿ ×”××©×ª×œ×”</div>
      <button class="topbar-cart" onclick="viewCart()">ğŸ›’<span class="cart-badge" id="cartBadge">0</span></button>
    </div>

    <div class="view active" id="viewCats"><div class="cat-scroll" id="catScroll"></div></div>

    <div class="view" id="viewProds">
      <div class="back-bar">
        <button class="back-btn" onclick="showView('cats')">&#8250; ×—×–×¨×”</button>
        <div class="back-title" id="prodListTitle"></div>
        <div style="width:56px"></div>
      </div>
      <div class="prod-scroll" id="prodScroll"></div>
    </div>

    <div class="view detail-view" id="viewDetail">
      <div class="back-bar">
        <button class="back-btn" onclick="showView('prods')">&#8250; ×—×–×¨×”</button>
        <div class="back-title" id="detailBackTitle"></div>
        <div style="width:56px"></div>
      </div>
      <div class="detail-scroll">
        <div class="detail-hero" id="detailHero">
          <div class="img-nav">
            <button class="img-nav-btn" id="btnNext">&#8250;</button>
            <div class="dots" id="dotsWrap"></div>
            <button class="img-nav-btn" id="btnPrev">&#8249;</button>
          </div>
        </div>
        <div class="detail-body">
          <div class="detail-name"  id="detailName"></div>
          <div class="detail-price" id="detailPrice"></div>
          <div class="detail-attrs" id="detailAttrs"></div>
          <div class="detail-desc"  id="detailDesc"></div>
        </div>
      </div>
      <div class="detail-footer"><button class="add-btn" id="addBtn">×”×•×¡×£ ×œ×¡×œ</button></div>
    </div>

    <div class="bottom-nav">
      <button class="bnav-btn active" onclick="showView('cats')"><span class="bnav-icon">ğŸŒ¿</span>×§×˜×’×•×¨×™×•×ª</button>
      <button class="bnav-btn" onclick="viewCart()"><span class="bnav-icon">ğŸ›’</span>×¡×œ ×§× ×™×•×ª</button>
    </div>
    <div class="toast" id="toast"></div>
  </div>
</div>

<script>
// â”€â”€ Wikipedia image fetch â”€â”€
// Wikipedia REST API ××—×–×™×¨ JSON ×¢× URL ×œ×ª××•× ×” ×”×¨××©×™×ª ×©×œ ×”×“×£
var imgCache = {};

function getWikiImg(pageTitle, callback) {
  if (imgCache[pageTitle]) { callback(imgCache[pageTitle]); return; }
  var url = 'https://en.wikipedia.org/api/rest_v1/page/summary/' + encodeURIComponent(pageTitle);
  fetch(url)
    .then(function(r){ return r.json(); })
    .then(function(data){
      var img = (data.thumbnail && data.thumbnail.source) ? data.thumbnail.source.replace(/\/\d+px-/, '/500px-') : null;
      imgCache[pageTitle] = img;
      callback(img);
    })
    .catch(function(){ callback(null); });
}

function setImgEl(el, pageTitle) {
  // show spinner
  el.innerHTML = '<div class="thumb-loading"><div class="thumb-spinner"></div></div>';
  getWikiImg(pageTitle, function(src) {
    if (src) {
      var img = document.createElement('img');
      img.src = src;
      img.onerror = function() { el.innerHTML = '<div class="thumb-loading" style="font-size:28px">ğŸŒ±</div>'; };
      el.innerHTML = '';
      el.appendChild(img);
    } else {
      el.innerHTML = '<div class="thumb-loading" style="font-size:28px">ğŸŒ±</div>';
    }
  });
}

function setHeroImg(container, pageTitle) {
  var nav = container.querySelector('.img-nav');
  // remove old image
  Array.from(container.children).forEach(function(c){ if(c !== nav) c.remove(); });
  // spinner
  var loader = document.createElement('div');
  loader.className = 'hero-loading';
  loader.innerHTML = '<div class="hero-spinner"></div><span>×˜×•×¢×Ÿ ×ª××•× ×”...</span>';
  container.insertBefore(loader, nav);

  getWikiImg(pageTitle, function(src){
    loader.remove();
    if (src) {
      var img = document.createElement('img');
      img.src = src.replace(/\/\d+px-/, '/800px-');
      img.onerror = function() {
        var fb = document.createElement('div');
        fb.style.cssText = 'font-size:80px;';
        fb.textContent = 'ğŸŒ±';
        container.insertBefore(fb, nav);
      };
      container.insertBefore(img, nav);
    }
  });
}

// â”€â”€ DATA â”€â”€
// wikiPage = ×©× ×“×£ ×•×™×§×™×¤×“×™×” ×œ×§×‘×œ×ª ×ª××•× ×”
var PRODUCTS = {
  '×ª×‘×œ×™× ×™×': { wikiPage:'Rosemary', items:[
    { name:'×¨×•×–××¨×™×Ÿ ×¨×¤×•××™', price:25, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×¢×¥ ×•×¢×“××”', desc:'×ª×‘×œ×™×Ÿ ×™×¨×•×—× ×™ ××××™×¥, ××¦×•×™×Ÿ ×œ×‘×™×©×•×œ ×•×œ××¨×¤×¡×ª. ×¢××™×“ ×œ×—×•× ×•×™×•×‘×©.',       wikiPage:'Rosemary' },
    { name:'× ×¢× ×¢',          price:18, sun:'×—×¦×™ ×©××©',  water:'×’×‘×•×”×”',   type:'×¢×©×‘×•× ×™',  desc:'×¢×©×‘ ×¨×™×—× ×™ ××¨×¢× ×Ÿ, ××¦×•×™×Ÿ ×œ×—×œ×™×˜×•×ª ×•×œ×‘×™×©×•×œ. ×’×“×œ ××”×¨.',                 wikiPage:'Mentha' },
    { name:'×‘×–×™×œ×™×§×•×',      price:15, sun:'×©××© ××œ××”', water:'×‘×™× ×•× ×™×ª', type:'×¢×©×‘×•× ×™',  desc:'×ª×‘×œ×™×Ÿ ×§×œ××¡×™ ×œ×¤×¡×˜×•×ª ×•×¡×œ×˜×™×. ××•×”×‘ ×—×•× ×•×©××©.',                         wikiPage:'Basil' },
    { name:'××•×¨×’× ×•',        price:20, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×¢×©×‘×•× ×™',  desc:'×ª×‘×œ×™×Ÿ ×™×-×ª×™×›×•× ×™ ×¢××™×“ ×•××©×•×‘×—. ××¦×•×™×Ÿ ×œ×¤×™×¦×” ×•×ª×‘×©×™×œ×™×.',               wikiPage:'Oregano' },
    { name:'××¨×•×•×”',         price:22, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×¢×¥ ×•×¢×“××”', desc:'×¦××— ×¨×™×—× ×™ ×‘×¢×œ ×¢×œ×™× ×§×˜×™×¤×ª×™×™×. ××“×™×¦×™× ×œ×™ ×•×œ×‘×™×©×•×œ.',                  wikiPage:'Salvia officinalis' }
  ]},
  '×¦××—×™ ×—×•×¥': { wikiPage:'Lavandula', items:[
    { name:'×œ×‘× ×“×¨',      price:35, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×©×™×—',    desc:'×¦××— ×¨×™×—× ×™ ×¢××™×“ ×‘×¦×‘×¢ ×¡×’×•×œ ×§×¡×•×. ××•×©×š ×¤×¨×¤×¨×™× ×•×“×‘×•×¨×™×.',  wikiPage:'Lavandula' },
    { name:'×’×¨× ×™×•×',     price:28, sun:'×—×¦×™ ×©××©',  water:'×‘×™× ×•× ×™×ª', type:'×¢×©×‘×•× ×™', desc:'×¤×•×¨×— ×‘×¦×‘×¢×™× ×¢×©×™×¨×™×, ××¦×•×™×Ÿ ×œ×¢×¦×™×¦×™× ×•××¨×¤×¡×•×ª.',            wikiPage:'Pelargonium' },
    { name:'×™×¡××™×Ÿ',      price:45, sun:'×©××© ××œ××”', water:'×‘×™× ×•× ×™×ª', type:'××˜×¤×¡',   desc:'××˜×¤×¡ ×¨×™×—× ×™ ×¢× ×¤×¨×™×—×” ×œ×‘× ×” ××“×”×™××” ×‘×§×™×¥.',                 wikiPage:'Jasmine' },
    { name:'×‘×•×’× ×•×•×™×œ×™×”', price:60, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'××˜×¤×¡',   desc:'××˜×¤×¡ ×¦×‘×¢×•× ×™ ×¢××™×“ ×—×•× ××•×©×œ× ×œ×’×“×¨×•×ª ×•××¨×¤×¡×•×ª.',            wikiPage:'Bougainvillea' }
  ]},
  '×¦××—×™ ×¤× ×™×': { wikiPage:'Monstera deliciosa', items:[
    { name:'××•× ×¡×˜×¨×”',   price:85,  sun:'××•×¨ ×¢×§×™×£', water:'×‘×™× ×•× ×™×ª', type:'×¢×œ×™×', desc:'×¦××— ×˜×¨×•×¤×™ ×¢× ×¢×œ×™× ×× ×•×§×‘×™× ××¨×©×™××™×.',              wikiPage:'Monstera deliciosa' },
    { name:'×¤×•×˜×•×¡',     price:35,  sun:'××•×¨ ×¢×§×™×£', water:'× ××•×›×”',   type:'××˜×¤×¡', desc:'×”×¦××— ×”×›×™ ×§×œ ×œ×’×™×“×•×œ! ×¢××™×“ ×•××˜×”×¨ ××•×•×™×¨.',            wikiPage:'Epipremnum aureum' },
    { name:'×¤×™×§×•×¡',     price:120, sun:'××•×¨ ×¢×§×™×£', water:'×‘×™× ×•× ×™×ª', type:'×¢×¥',   desc:'×¢×¥ ×¤× ×™× ××œ×’× ×˜×™ ×¢× ×¢×œ×™× ××‘×¨×™×§×™×.',                   wikiPage:'Ficus benjamina' },
    { name:'×¡×¤×ª×™×¤×™×œ×•×', price:55,  sun:'×¦×œ ×—×œ×§×™',  water:'×’×‘×•×”×”',   type:'×¢×œ×™×', desc:'×¦××— ×¤× ×™× ×¢× ×¤×¨×™×—×” ×œ×‘× ×” ×™×¤×”×¤×™×™×”. ××˜×”×¨ ××•×•×™×¨ ××¦×•×™×Ÿ.', wikiPage:'Spathiphyllum' }
  ]},
  '×§×§"×˜×•×¡×™×': { wikiPage:'Aloe vera', items:[
    { name:'××œ×•×•×¨×”',      price:30, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×¨×‘-×©× ×ª×™', desc:'×¦××— ××¨×¤× ××•×›×—. ××™×“×™××œ×™ ×œ××ª×—×™×œ×™× ×•×œ×—×•×.',          wikiPage:'Aloe vera' },
    { name:'×§×§×˜×•×¡ ×›×“×•×¨×™', price:25, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×›×“',      desc:'×§×§×˜×•×¡ ×§×•××¤×§×˜×™ ×‘×¢×œ ×¦×•×¨×” ×›×“×•×¨×™×ª. ×›××¢×˜ ×œ×œ× ×˜×™×¤×•×œ.',  wikiPage:'Echinocactus grusonii' },
    { name:'××’×‘×”',        price:70, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×¢× ×§×™',    desc:'×¦××— ××“×‘×¨×™ ×¢× ×¢×œ×™× ×—×“×™× ××¨×©×™××™×. ×¢××™×“ ×××•×“.',       wikiPage:'Agave americana' }
  ]},
  '×¡×•×§×•×œ× ×˜×™×': { wikiPage:'Echeveria', items:[
    { name:'××›×•×•×¨×™×™×”',  price:20, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×›×“',   desc:'×¡×•×§×•×œ× ×˜ ×§×˜×Ÿ ×•×™×¤×” ×¢× ×¢×œ×™× ×©×× ×™× ×‘×¦×•×¨×ª ×•×¨×“.',           wikiPage:'Echeveria' },
    { name:'×”×•×•×¨×ª×™×”',   price:35, sun:'××•×¨ ×¢×§×™×£', water:'× ××•×›×”', type:'×›×“',   desc:'×¡×•×§×•×œ× ×˜ ×¤× ×™× ××•×©×œ× ×¢× ×¤×¡×™× ×œ×‘× ×™× ××™×•×—×“×™×.',           wikiPage:'Haworthia' },
    { name:'×¡× ×¡×•×•×™×¨×™×”', price:55, sun:'×›×œ ××•×¨',   water:'× ××•×›×”', type:'×¢×œ×™×', desc:'××›×•× ×” "×œ×©×•×Ÿ ×—××•×ª" â€“ ×¢××™×“ ×œ×”×–× ×—×” ×•××˜×”×¨ ××•×•×™×¨.',       wikiPage:'Sansevieria trifasciata' }
  ]},
  '×©×™×—×™×': { wikiPage:'Rose', items:[
    { name:'×•×¨×“',            price:75, sun:'×©××© ××œ××”', water:'×’×‘×•×”×”',   type:'×©×™×— ×¤×•×¨×—', desc:'××œ×š ×”×¤×¨×—×™× ×‘×¦×‘×¢×™× ×¢×©×™×¨×™× ×•×‘×•×©× ××¢× ×’. ×“×•×¨×© ×˜×™×¤×•×œ.',   wikiPage:'Rose' },
    { name:'××•×¨× ×× ×˜×œ×™ ×™×¨×•×§', price:45, sun:'×—×¦×™ ×©××©',  water:'×‘×™× ×•× ×™×ª', type:'×©×™×— ×™×¨×•×§', desc:'×©×™×— ×™×¨×•×§ ×œ××•×¨×š ×”×©× ×”, ××¦×•×™×Ÿ ×œ×’×™×“×•×¨ ×•×¢×™×¦×•×‘ ×’×™× ×”.',     wikiPage:'Buxus sempervirens' }
  ]},
  '×›×œ×™ ×§×™×‘×•×œ': { wikiPage:'Terracotta', items:[
    { name:'×¢×¦×™×¥ ×—×¨×¡',         price:45, sun:null, water:null, type:'×‘×™× ×•× ×™', desc:'×¢×¦×™×¥ ×—×¨×¡ ×§×œ××¡×™ ×¢× × ×§×‘ × ×™×§×•×–. ××ª××™× ×œ×¨×•×‘ ×”×¦××—×™×.',  wikiPage:'Terracotta' },
    { name:'×¢×¦×™×¥ ×¤×œ×¡×˜×™×§ ×©×—×•×¨', price:15, sun:null, water:null, type:'×§×˜×Ÿ',   desc:'×¢×¦×™×¥ ×§×œ ×•×¢××™×“, ××’×™×¢ ×‘××’×•×•×Ÿ ×’×“×œ×™×.',                 wikiPage:'Flowerpot' },
    { name:'××“× ×™×ª ××œ×‘× ×™×ª',     price:90, sun:null, water:null, type:'×’×“×•×œ',  desc:'××“× ×™×ª ×’×“×•×œ×” ×œ×©×™×—×™× ×•×¢×¦×™×. ×¢××™×“×” ×œ×ª× ××™ ×—×•×¥.',       wikiPage:'Planter_(gardening)' }
  ]}
};

var cats = Object.keys(PRODUCTS);
var currentCat = null;
var currentIdx  = 0;
var cart = [];

// â”€â”€ BUILD CATS â”€â”€
cats.forEach(function(cat) {
  var d  = PRODUCTS[cat];
  var el = document.createElement('div');
  el.className = 'cat-item';

  var thumbWrap = document.createElement('div');
  thumbWrap.className = 'cat-thumb';
  setImgEl(thumbWrap, d.wikiPage);

  var txt = document.createElement('div');
  txt.className = 'cat-text';
  txt.innerHTML = '<div class="cat-name">' + cat + '</div><div class="cat-count">' + d.items.length + ' ××•×¦×¨×™×</div>';

  var arr = document.createElement('span');
  arr.className = 'cat-arrow';
  arr.innerHTML = '&#8249;';

  el.appendChild(thumbWrap);
  el.appendChild(txt);
  el.appendChild(arr);
  el.addEventListener('click', function(){ openCat(cat); });
  document.getElementById('catScroll').appendChild(el);
});

function openCat(cat) {
  currentCat = cat;
  document.getElementById('prodListTitle').textContent = cat;
  var scroll = document.getElementById('prodScroll');
  scroll.innerHTML = '';

  PRODUCTS[cat].items.forEach(function(p, idx) {
    var el = document.createElement('div');
    el.className = 'prod-item';

    var thumbWrap = document.createElement('div');
    thumbWrap.className = 'prod-thumb';
    setImgEl(thumbWrap, p.wikiPage);

    var sub  = [p.sun, p.water].filter(Boolean).join(' Â· ');
    var info = document.createElement('div');
    info.className = 'prod-info';
    info.innerHTML = '<div class="prod-name">' + p.name + '</div><div class="prod-sub">' + sub + '</div>';

    var pr = document.createElement('div');
    pr.className = 'prod-price';
    pr.textContent = 'â‚ª' + p.price;

    el.appendChild(thumbWrap);
    el.appendChild(info);
    el.appendChild(pr);
    (function(i){ el.addEventListener('click', function(){ openProduct(i); }); })(idx);
    scroll.appendChild(el);
  });
  showView('prods');
}

function openProduct(idx) { currentIdx = idx; renderDetail(); showView('detail'); }

function renderDetail() {
  var list = PRODUCTS[currentCat].items;
  var p    = list[currentIdx];
  document.getElementById('detailBackTitle').textContent = currentCat;

  setHeroImg(document.getElementById('detailHero'), p.wikiPage);

  // dots
  var dw = document.getElementById('dotsWrap');
  dw.innerHTML = '';
  list.forEach(function(_, i){
    var d = document.createElement('div');
    d.className = 'dot' + (i === currentIdx ? ' active' : '');
    dw.appendChild(d);
  });

  document.getElementById('detailName').textContent  = p.name;
  document.getElementById('detailPrice').textContent = 'â‚ª' + p.price;

  var html = '';
  if (p.sun)   html += '<div class="d-attr"><span class="d-label">×©××©</span><span class="d-val">â˜€ï¸ ' + p.sun + '</span></div>';
  if (p.water) html += '<div class="d-attr"><span class="d-label">×”×©×§×™×”</span><span class="d-val">ğŸ’§ ' + p.water + '</span></div>';
  if (p.type)  html += '<div class="d-attr"><span class="d-label">×¡×•×’</span><span class="d-val">ğŸª´ ' + p.type + '</span></div>';
  document.getElementById('detailAttrs').innerHTML = html || '<div style="color:#aaa;font-size:14px">××™×Ÿ ×××¤×™×™× ×™×</div>';
  document.getElementById('detailDesc').textContent = p.desc;

  document.getElementById('btnPrev').disabled = (currentIdx <= 0);
  document.getElementById('btnNext').disabled = (currentIdx >= list.length - 1);
  var btn = document.getElementById('addBtn');
  btn.textContent = '×”×•×¡×£ ×œ×¡×œ';
  btn.classList.remove('added');
}

document.getElementById('btnPrev').addEventListener('click', function(){
  if (currentIdx > 0) { currentIdx--; renderDetail(); }
});
document.getElementById('btnNext').addEventListener('click', function(){
  if (currentIdx < PRODUCTS[currentCat].items.length - 1) { currentIdx++; renderDetail(); }
});
document.getElementById('addBtn').addEventListener('click', function(){
  var p = PRODUCTS[currentCat].items[currentIdx];
  cart.push(p);
  document.getElementById('cartBadge').textContent = cart.length;
  var btn = document.getElementById('addBtn');
  btn.textContent = 'âœ“ × ×•×¡×£ ×œ×¡×œ!';
  btn.classList.add('added');
  showToast(p.name + ' × ×•×¡×£ ×œ×¡×œ');
  setTimeout(function(){ btn.textContent = '×”×•×¡×£ ×œ×¡×œ'; btn.classList.remove('added'); }, 1800);
});

function showView(name) {
  var map = { cats:'viewCats', prods:'viewProds', detail:'viewDetail' };
  document.querySelectorAll('.view').forEach(function(v){ v.classList.remove('active'); });
  document.getElementById(map[name]).classList.add('active');
}
function viewCart() {
  if (!cart.length) { showToast('×”×¡×œ ×¨×™×§'); return; }
  var lines = cart.map(function(p){ return p.name+' â€“ â‚ª'+p.price; });
  var total = cart.reduce(function(s,p){ return s+p.price; },0);
  alert('ğŸ›’ ×”×¡×œ ×©×œ×š:\n\n'+lines.join('\n')+'\n\n×¡×”"×›: â‚ª'+total);
}
function showToast(msg) {
  var el = document.getElementById('toast');
  el.textContent = 'âœ“ ' + msg;
  el.classList.add('show');
  setTimeout(function(){ el.classList.remove('show'); }, 2000);
}
</script>
</body>
</html>
