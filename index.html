// ×”×“×‘×§ ×›<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×”××©×ª×œ×”</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;700;900&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
:root {
  --green:#3a8c3a; --green-dark:#2a6a2a; --green-pale:#edf7ed;
  --orange:#e07010; --text:#1a2e1a; --white:#fff;
  --radius:14px;
}
body { font-family:'Heebo',sans-serif; background:#f4f6f4; height:100vh; overflow:hidden; }

/* â”€â”€ LAYOUT WRAPPER â”€â”€ */
.frame {
  width:100%;
  max-width:1100px;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  height:100vh;
  background:#f4f6f4;
}

.notch, .side { display:none; }

/* â”€â”€ SCREEN â”€â”€ */
.screen {
  flex:1;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  min-height:0;
}

/* â”€â”€ TOP BAR â”€â”€ */
.topbar {
  background:var(--white);
  padding:18px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid #e0e8e0;
  flex-shrink:0;
}
.topbar-title { font-size:20px; font-weight:900; color:var(--green-dark); letter-spacing:-.3px; }
.cart-btn { position:relative; background:none; border:none; font-size:24px; cursor:pointer; line-height:1; }
.cart-badge {
  position:absolute; top:-5px; left:-7px;
  background:#e03030; color:#fff; border-radius:50%;
  width:17px; height:17px; font-size:10px; font-weight:900;
  display:flex; align-items:center; justify-content:center;
}

/* â”€â”€ VIEWS â”€â”€ */
.view { display:none; flex:1; flex-direction:column; overflow:hidden; min-height:0; }
.view.active { display:flex; }

/* â”€â”€ BACK BAR â”€â”€ */
.back-bar {
  background:var(--white); padding:10px 16px;
  display:flex; align-items:center;
  border-bottom:1px solid #e0e8e0; flex-shrink:0;
}
.back-btn {
  background:none; border:none; font-size:15px; font-weight:700;
  color:var(--green-dark); cursor:pointer; font-family:'Heebo',sans-serif;
}
.bar-title { font-size:16px; font-weight:900; color:var(--text); flex:1; text-align:center; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CATEGORY LIST â€” 7 items, no scroll
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.cat-list {
  flex:1;
  display:flex;
  flex-direction:column;
  padding:20px;
  gap:14px;
  overflow:auto;
}
.cat-row {
  background:var(--white);
  border-radius:var(--radius);
  overflow:hidden;
  display:flex;
  align-items:stretch;
  cursor:pointer;
  border:2px solid #e4ece4;
  box-shadow:0 1px 6px rgba(0,0,0,.05);
  transition:border-color .12s, transform .12s;
}
.cat-row:active { transform:scale(.97); border-color:var(--green); }
.cat-img { width:80px; flex-shrink:0; overflow:hidden; background:var(--green-pale); }
.cat-img img { width:100%; height:100%; object-fit:cover; display:block; }
.cat-body { flex:1; padding:0 12px; display:flex; align-items:center; justify-content:space-between; }
.cat-name  { font-size:17px; font-weight:900; color:var(--text); }
.cat-count { font-size:12px; color:#aaa; margin-top:2px; font-weight:500; }
.cat-arr   { font-size:18px; color:#ccc; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRODUCT LIST â€” compact rows, no scroll
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.prod-list {
  flex:1;
  display:flex;
  flex-direction:column;
  padding:20px;
  gap:14px;
  overflow:auto;
}
.prod-row {
  background:var(--white);
  border-radius:var(--radius);
  overflow:hidden;
  display:flex;
  align-items:stretch;
  cursor:pointer;
  border:2px solid #e4ece4;
  box-shadow:0 1px 6px rgba(0,0,0,.05);
  transition:border-color .12s, transform .12s;
}
.prod-row:active { transform:scale(.97); border-color:var(--green); }
.prod-img { width:72px; flex-shrink:0; overflow:hidden; background:var(--green-pale); }
.prod-img img { width:100%; height:100%; object-fit:cover; display:block; }
.prod-body { flex:1; padding:0 12px; display:flex; align-items:center; justify-content:space-between; gap:8px; }
.prod-name { font-size:16px; font-weight:900; color:var(--text); }
.prod-sub  { font-size:12px; color:#aaa; margin-top:2px; font-weight:500; }
.prod-price { font-size:18px; font-weight:900; color:var(--orange); flex-shrink:0; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PRODUCT DETAIL â€” no scroll, everything visible
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.detail-wrap {
  flex:1;
  display:flex;
  flex-direction:column;
  padding:20px;
  gap:20px;
  overflow:auto;
  min-height:0;
}

/* Image area */
.detail-img-area {
  flex:0 0 200px; border-radius:var(--radius);
  overflow:hidden; position:relative;
  background:var(--green-pale);
}
.detail-img-area img {
  width:100%; height:100%; object-fit:cover; display:block;
}
.detail-img-area::after {
  content:''; position:absolute; inset:0;
  background:linear-gradient(to top, rgba(0,0,0,.45) 0%, transparent 50%);
  pointer-events:none;
}
/* name + price overlaid on image */
.detail-overlay {
  position:absolute; bottom:0; right:0; left:0;
  padding:10px 14px; z-index:2;
}
.detail-name  { font-size:22px; font-weight:900; color:#fff; text-shadow:0 1px 4px rgba(0,0,0,.5); }
.detail-price { font-size:26px; font-weight:900; color:#ffd080; text-shadow:0 1px 4px rgba(0,0,0,.4); }

/* nav arrows */
.detail-nav {
  position:absolute; bottom:10px; left:10px; display:flex; gap:8px; z-index:3;
}
.nav-btn {
  width:36px; height:28px; background:rgba(255,255,255,.85);
  border:none; border-radius:20px; font-size:14px; font-weight:700;
  cursor:pointer; display:flex; align-items:center; justify-content:center;
  color:#333; box-shadow:0 2px 6px rgba(0,0,0,.2);
}
.nav-btn:disabled { opacity:.3; }
.nav-btn:active:not(:disabled) { transform:scale(.9); }

/* dots */
.detail-dots {
  position:absolute; top:10px; left:50%; transform:translateX(-50%);
  display:flex; gap:5px; z-index:3;
}
.dot { width:6px; height:6px; border-radius:50%; background:rgba(255,255,255,.4); transition:background .2s; }
.dot.active { background:#fff; }

/* Attrs card */
.detail-attrs {
  flex:0 0 auto; background:var(--white); border-radius:var(--radius);
  border:1.5px solid #e4ece4; padding:10px 14px;
  display:flex; gap:0; flex-direction:column;
}
.attr-row {
  display:flex; align-items:center; justify-content:space-between;
  padding:6px 0; border-bottom:1px solid #f0f0f0; font-size:15px;
}
.attr-row:last-child { border-bottom:none; padding-bottom:0; }
.attr-row:first-child { padding-top:0; }
.attr-lbl { color:#888; font-weight:600; }
.attr-val { font-weight:800; color:var(--text); display:flex; align-items:center; gap:5px; }

/* Description */
.detail-desc {
  flex:1; background:var(--white); border-radius:var(--radius);
  border:1.5px solid #e4ece4; padding:10px 14px;
  font-size:15px; color:#555; line-height:1.6;
  display:flex; align-items:center; min-height:0;
  font-weight:500;
}

/* Add button */
.detail-add-btn {
  flex:0 0 auto; width:100%; padding:14px;
  background:var(--green); color:#fff; border:none;
  border-radius:var(--radius); font-family:'Heebo',sans-serif;
  font-size:18px; font-weight:900; cursor:pointer;
  box-shadow:0 4px 14px rgba(58,140,58,.3);
  transition:background .15s;
}
.detail-add-btn:active { transform:scale(.98); }
.detail-add-btn.added { background:#5aaa5a; }

/* â”€â”€ SPINNER â”€â”€ */
.spinner-wrap { width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
.spinner { width:22px; height:22px; border:3px solid #ddd; border-top-color:var(--green); border-radius:50%; animation:spin .7s linear infinite; }
@keyframes spin { to { transform:rotate(360deg); } }

/* â”€â”€ BOTTOM NAV â”€â”€ */
.bottom-nav {
  background:var(--white); border-top:1px solid #e0e8e0;
  display:flex; padding:6px 0 18px; flex-shrink:0;
}
.bnav { flex:1; display:flex; flex-direction:column; align-items:center; gap:2px;
  background:none; border:none; cursor:pointer;
  font-family:'Heebo',sans-serif; font-size:11px; color:#bbb; padding:4px 0; }
.bnav.active { color:var(--green-dark); }
.bnav-icon { font-size:20px; }

/* â”€â”€ TOAST â”€â”€ */
.toast {
  position:absolute; bottom:80px; left:50%;
  transform:translateX(-50%) translateY(70px);
  background:var(--green-dark); color:#fff;
  padding:9px 20px; border-radius:40px;
  font-family:'Heebo',sans-serif; font-weight:700; font-size:14px;
  transition:transform .25s ease; z-index:999; pointer-events:none; white-space:nowrap;
}
.toast.show { transform:translateX(-50%) translateY(0); }
</style>
</head>
<body>

<div class="frame">
  <div class="side r"></div>
  <div class="side l1"></div>
  <div class="side l2"></div>
  <div class="side l3"></div>
  <div class="notch"></div>

  <div class="screen">
    <!-- TOP BAR -->
    <div class="topbar">
      <div class="topbar-title">ğŸŒ¿ ×”××©×ª×œ×”</div>
      <button class="cart-btn" id="cartBtn" onclick="viewCart()">
        ğŸ›’<span class="cart-badge" id="cartBadge">0</span>
      </button>
    </div>

    <!-- VIEW: CATEGORIES -->
    <div class="view active" id="viewCats">
      <div class="cat-list" id="catList"></div>
    </div>

    <!-- VIEW: PRODUCT LIST -->
    <div class="view" id="viewProds">
      <div class="back-bar">
        <button class="back-btn" onclick="showView('cats')">&#8250; ×—×–×¨×”</button>
        <div class="bar-title" id="prodTitle"></div>
        <div style="width:48px"></div>
      </div>
      <div class="prod-list" id="prodList"></div>
    </div>

    <!-- VIEW: PRODUCT DETAIL -->
    <div class="view" id="viewDetail">
      <div class="back-bar">
        <button class="back-btn" onclick="showView('prods')">&#8250; ×—×–×¨×”</button>
        <div class="bar-title" id="detailTitle"></div>
        <div style="width:48px"></div>
      </div>
      <div class="detail-wrap">
        <!-- Image -->
        <div class="detail-img-area" id="detailImgArea">
          <div class="detail-dots" id="detailDots"></div>
          <div class="detail-overlay">
            <div class="detail-name"  id="detailName"></div>
            <div class="detail-price" id="detailPrice"></div>
          </div>
          <div class="detail-nav">
            <button class="nav-btn" id="btnPrev">&#8249;</button>
            <button class="nav-btn" id="btnNext">&#8250;</button>
          </div>
        </div>
        <!-- Attrs -->
        <div class="detail-attrs" id="detailAttrs"></div>
        <!-- Desc -->
        <div class="detail-desc" id="detailDesc"></div>
        <!-- Add -->
        <button class="detail-add-btn" id="addBtn">×”×•×¡×£ ×œ×¡×œ</button>
      </div>
    </div>

    <!-- BOTTOM NAV -->
    <div class="bottom-nav">
      <button class="bnav active" id="bnavCats" onclick="showView('cats')">
        <span class="bnav-icon">ğŸŒ¿</span>×§×˜×’×•×¨×™×•×ª
      </button>
      <button class="bnav" id="bnavCart" onclick="viewCart()">
        <span class="bnav-icon">ğŸ›’</span>×¡×œ ×§× ×™×•×ª
      </button>
    </div>

    <div class="toast" id="toast"></div>
  </div>
</div>

<script>
/* â”€â”€ Wikipedia image cache â”€â”€ */
var imgCache = {};
function wikiImg(page, cb) {
  if (imgCache[page] !== undefined) { cb(imgCache[page]); return; }
  fetch('https://en.wikipedia.org/api/rest_v1/page/summary/' + encodeURIComponent(page))
    .then(function(r){ return r.json(); })
    .then(function(d){
      var src = d.thumbnail ? d.thumbnail.source.replace(/\/\d+px-/,'/600px-') : '';
      imgCache[page] = src;
      cb(src);
    })
    .catch(function(){ imgCache[page]=''; cb(''); });
}

function loadThumb(container, page) {
  container.innerHTML = '<div class="spinner-wrap"><div class="spinner"></div></div>';
  wikiImg(page, function(src){
    if (src) {
      var img = document.createElement('img');
      img.src = src;
      img.onerror = function(){ container.innerHTML=''; };
      container.innerHTML = '';
      container.appendChild(img);
    } else { container.innerHTML = ''; }
  });
}

function loadHero(page) {
  var area = document.getElementById('detailImgArea');
  // keep overlay, dots, nav
  var keep = ['detail-overlay','detail-dots','detail-nav'].map(function(c){ return area.querySelector('.'+c); });
  // remove old img
  var old = area.querySelector('img.hero');
  if (old) old.remove();

  // spinner background
  area.style.background = '#edf7ed';

  wikiImg(page, function(src){
    if (src) {
      var img = document.createElement('img');
      img.className = 'hero';
      img.src = src.replace(/\/\d+px-/,'/800px-');
      img.style.cssText = 'position:absolute;inset:0;width:100%;height:100%;object-fit:cover;';
      area.insertBefore(img, area.firstChild);
    }
  });
}

/* â”€â”€ DATA â”€â”€ */
var DATA = {
  '×ª×‘×œ×™× ×™×':   { wp:'Rosemary', items:[
    { n:'×¨×•×–××¨×™×Ÿ ×¨×¤×•××™', p:25, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×¢×¥ ×•×¢×“××”', desc:'×ª×‘×œ×™×Ÿ ×™×¨×•×—× ×™ ××××™×¥, ××¦×•×™×Ÿ ×œ×‘×™×©×•×œ ×•×œ××¨×¤×¡×ª.',      wp:'Rosemary' },
    { n:'× ×¢× ×¢',          p:18, sun:'×—×¦×™ ×©××©',  water:'×’×‘×•×”×”',   type:'×¢×©×‘×•× ×™',  desc:'×¢×©×‘ ×¨×™×—× ×™ ××¨×¢× ×Ÿ, ××¦×•×™×Ÿ ×œ×—×œ×™×˜×•×ª ×•×œ×‘×™×©×•×œ.',          wp:'Mentha' },
    { n:'×‘×–×™×œ×™×§×•×',      p:15, sun:'×©××© ××œ××”', water:'×‘×™× ×•× ×™×ª', type:'×¢×©×‘×•× ×™',  desc:'×ª×‘×œ×™×Ÿ ×§×œ××¡×™ ×œ×¤×¡×˜×•×ª ×•×¡×œ×˜×™×. ××•×”×‘ ×—×•× ×•×©××©.',        wp:'Basil' },
    { n:'××•×¨×’× ×•',        p:20, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×¢×©×‘×•× ×™',  desc:'×ª×‘×œ×™×Ÿ ×™×-×ª×™×›×•× ×™ ×¢××™×“. ××¦×•×™×Ÿ ×œ×¤×™×¦×” ×•×ª×‘×©×™×œ×™×.',      wp:'Oregano' },
    { n:'××¨×•×•×”',         p:22, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×¢×¥ ×•×¢×“××”', desc:'×¦××— ×¨×™×—× ×™ ×¢× ×¢×œ×™× ×§×˜×™×¤×ª×™×™×. ××“×™×¦×™× ×œ×™ ×•×œ×‘×™×©×•×œ.',  wp:'Salvia officinalis' }
  ]},
  '×¦××—×™ ×—×•×¥':  { wp:'Lavandula', items:[
    { n:'×œ×‘× ×“×¨',      p:35, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'×©×™×—',    desc:'×¦××— ×¡×’×•×œ ×¨×™×—× ×™. ××•×©×š ×¤×¨×¤×¨×™× ×•×“×‘×•×¨×™×.', wp:'Lavandula' },
    { n:'×’×¨× ×™×•×',     p:28, sun:'×—×¦×™ ×©××©',  water:'×‘×™× ×•× ×™×ª', type:'×¢×©×‘×•× ×™', desc:'×¤×•×¨×— ×‘×¦×‘×¢×™× ×¢×©×™×¨×™×. ××¦×•×™×Ÿ ×œ××¨×¤×¡×•×ª.',   wp:'Pelargonium' },
    { n:'×™×¡××™×Ÿ',      p:45, sun:'×©××© ××œ××”', water:'×‘×™× ×•× ×™×ª', type:'××˜×¤×¡',   desc:'××˜×¤×¡ ×¨×™×—× ×™ ×¢× ×¤×¨×™×—×” ×œ×‘× ×” ×‘×§×™×¥.',       wp:'Jasmine' },
    { n:'×‘×•×’× ×•×•×™×œ×™×”', p:60, sun:'×©××© ××œ××”', water:'× ××•×›×”',   type:'××˜×¤×¡',   desc:'××˜×¤×¡ ×¦×‘×¢×•× ×™. ××•×©×œ× ×œ×’×“×¨×•×ª ×•××¨×¤×¡×•×ª.',  wp:'Bougainvillea' }
  ]},
  '×¦××—×™ ×¤× ×™×': { wp:'Monstera deliciosa', items:[
    { n:'××•× ×¡×˜×¨×”',   p:85,  sun:'××•×¨ ×¢×§×™×£', water:'×‘×™× ×•× ×™×ª', type:'×¢×œ×™×', desc:'×¦××— ×˜×¨×•×¤×™ ×¢× ×¢×œ×™× ×× ×•×§×‘×™× ××¨×©×™××™×.',          wp:'Monstera deliciosa' },
    { n:'×¤×•×˜×•×¡',     p:35,  sun:'××•×¨ ×¢×§×™×£', water:'× ××•×›×”',   type:'××˜×¤×¡', desc:'×”×›×™ ×§×œ ×œ×’×™×“×•×œ. ×¢××™×“ ×•××˜×”×¨ ××•×•×™×¨.',            wp:'Epipremnum aureum' },
    { n:'×¤×™×§×•×¡',     p:120, sun:'××•×¨ ×¢×§×™×£', water:'×‘×™× ×•× ×™×ª', type:'×¢×¥',   desc:'×¢×¥ ×¤× ×™× ××œ×’× ×˜×™ ×¢× ×¢×œ×™× ××‘×¨×™×§×™×.',             wp:'Ficus benjamina' },
    { n:'×¡×¤×ª×™×¤×™×œ×•×', p:55,  sun:'×¦×œ ×—×œ×§×™',  water:'×’×‘×•×”×”',   type:'×¢×œ×™×', desc:'×¤×¨×™×—×” ×œ×‘× ×” ×™×¤×”×¤×™×™×”. ××˜×”×¨ ××•×•×™×¨ ××¦×•×™×Ÿ.',       wp:'Spathiphyllum' }
  ]},
  '×§×§"×˜×•×¡×™×':  { wp:'Aloe vera', items:[
    { n:'××œ×•×•×¨×”',      p:30, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×¨×‘-×©× ×ª×™', desc:'×¦××— ××¨×¤×. ××™×“×™××œ×™ ×œ××ª×—×™×œ×™× ×•×œ×—×•×.',   wp:'Aloe vera' },
    { n:'×§×§×˜×•×¡ ×›×“×•×¨×™', p:25, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×›×“',      desc:'×¦×•×¨×” ×›×“×•×¨×™×ª ×™×¤×”. ×›××¢×˜ ×œ×œ× ×˜×™×¤×•×œ.',    wp:'Echinocactus grusonii' },
    { n:'××’×‘×”',        p:70, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×¢× ×§×™',    desc:'×¢×œ×™× ×—×“×™× ××¨×©×™××™×. ×¢××™×“ ×××•×“.',        wp:'Agave americana' }
  ]},
  '×¡×•×§×•×œ× ×˜×™×': { wp:'Echeveria', items:[
    { n:'××›×•×•×¨×™×™×”',  p:20, sun:'×©××© ××œ××”', water:'× ××•×›×”', type:'×›×“',   desc:'×¢×œ×™× ×©×× ×™× ×‘×¦×•×¨×ª ×•×¨×“. ××™× ×™××˜×•×¨×™ ×•×™×¤×”.', wp:'Echeveria' },
    { n:'×”×•×•×¨×ª×™×”',   p:35, sun:'××•×¨ ×¢×§×™×£', water:'× ××•×›×”', type:'×›×“',   desc:'×¤×¡×™× ×œ×‘× ×™× ××™×•×—×“×™×. ××•×©×œ× ×œ×¤× ×™×.',      wp:'Haworthia' },
    { n:'×¡× ×¡×•×•×™×¨×™×”', p:55, sun:'×›×œ ××•×¨',   water:'× ××•×›×”', type:'×¢×œ×™×', desc:'"×œ×©×•×Ÿ ×—××•×ª" - ×¢××™×“ ×•××˜×”×¨ ××•×•×™×¨.',        wp:'Sansevieria trifasciata' }
  ]},
  '×©×™×—×™×':     { wp:'Rose', items:[
    { n:'×•×¨×“',            p:75, sun:'×©××© ××œ××”', water:'×’×‘×•×”×”',   type:'×©×™×— ×¤×•×¨×—', desc:'××œ×š ×”×¤×¨×—×™×. ×¨×™×—× ×™ ×•×¢×©×™×¨ ×‘×¦×‘×¢×™×.', wp:'Rose' },
    { n:'××•×¨× ×× ×˜×œ×™ ×™×¨×•×§', p:45, sun:'×—×¦×™ ×©××©',  water:'×‘×™× ×•× ×™×ª', type:'×©×™×— ×™×¨×•×§', desc:'×™×¨×•×§ ×œ××•×¨×š ×”×©× ×”. ××¦×•×™×Ÿ ×œ×’×™×“×•×¨.',   wp:'Buxus sempervirens' }
  ]},
  '×›×œ×™ ×§×™×‘×•×œ': { wp:'Terracotta', items:[
    { n:'×¢×¦×™×¥ ×—×¨×¡',         p:45, sun:null, water:null, type:'×‘×™× ×•× ×™', desc:'×—×¨×¡ ×§×œ××¡×™ ×¢× × ×§×‘ × ×™×§×•×–. ×œ×¨×•×‘ ×”×¦××—×™×.',   wp:'Terracotta' },
    { n:'×¢×¦×™×¥ ×¤×œ×¡×˜×™×§ ×©×—×•×¨', p:15, sun:null, water:null, type:'×§×˜×Ÿ',   desc:'×§×œ ×•×¢××™×“. ××’×™×¢ ×‘××’×•×•×Ÿ ×’×“×œ×™×.',            wp:'Flowerpot' },
    { n:'××“× ×™×ª ××œ×‘× ×™×ª',     p:90, sun:null, water:null, type:'×’×“×•×œ',  desc:'×œ×©×™×—×™× ×•×¢×¦×™×. ×¢××™×“×” ×œ×ª× ××™ ×—×•×¥.',          wp:'Planter_(gardening)' }
  ]}
};

var cats = Object.keys(DATA);
var curCat = null, curIdx = 0, cart = [];

/* â”€â”€ BUILD CATEGORY LIST â”€â”€ */
cats.forEach(function(cat) {
  var d  = DATA[cat];
  var row = document.createElement('div');
  row.className = 'cat-row';

  var imgDiv = document.createElement('div');
  imgDiv.className = 'cat-img';
  loadThumb(imgDiv, d.wp);

  var body = document.createElement('div');
  body.className = 'cat-body';
  body.innerHTML =
    '<div><div class="cat-name">' + cat + '</div><div class="cat-count">' + d.items.length + ' ××•×¦×¨×™×</div></div>' +
    '<span class="cat-arr">&#8249;</span>';

  row.appendChild(imgDiv);
  row.appendChild(body);
  row.addEventListener('click', function(){ openCat(cat); });
  document.getElementById('catList').appendChild(row);
});

/* â”€â”€ OPEN CATEGORY â”€â”€ */
function openCat(cat) {
  curCat = cat;
  document.getElementById('prodTitle').textContent = cat;
  var list = document.getElementById('prodList');
  list.innerHTML = '';

  DATA[cat].items.forEach(function(p, idx) {
    var row = document.createElement('div');
    row.className = 'prod-row';

    var imgDiv = document.createElement('div');
    imgDiv.className = 'prod-img';
    loadThumb(imgDiv, p.wp);

    var body = document.createElement('div');
    body.className = 'prod-body';
    var sub = [p.sun, p.water].filter(Boolean).join(' Â· ');
    body.innerHTML =
      '<div><div class="prod-name">' + p.n + '</div><div class="prod-sub">' + sub + '</div></div>' +
      '<div class="prod-price">â‚ª' + p.p + '</div>';

    row.appendChild(imgDiv);
    row.appendChild(body);
    (function(i){ row.addEventListener('click', function(){ openProduct(i); }); })(idx);
    list.appendChild(row);
  });
  showView('prods');
}

/* â”€â”€ OPEN PRODUCT â”€â”€ */
function openProduct(idx) { curIdx = idx; renderDetail(); showView('detail'); }

function renderDetail() {
  var items = DATA[curCat].items;
  var p = items[curIdx];

  document.getElementById('detailTitle').textContent = curCat;
  document.getElementById('detailName').textContent  = p.n;
  document.getElementById('detailPrice').textContent = 'â‚ª' + p.p;
  document.getElementById('detailDesc').textContent  = p.desc;

  loadHero(p.wp);

  // dots
  var dw = document.getElementById('detailDots');
  dw.innerHTML = '';
  items.forEach(function(_, i){
    var d = document.createElement('div');
    d.className = 'dot' + (i===curIdx?' active':'');
    dw.appendChild(d);
  });

  // attrs
  var html = '';
  if (p.sun)   html += '<div class="attr-row"><span class="attr-lbl">â˜€ï¸ ×©××©</span><span class="attr-val">' + p.sun + '</span></div>';
  if (p.water) html += '<div class="attr-row"><span class="attr-lbl">ğŸ’§ ×”×©×§×™×”</span><span class="attr-val">' + p.water + '</span></div>';
  if (p.type)  html += '<div class="attr-row"><span class="attr-lbl">ğŸª´ ×¡×•×’</span><span class="attr-val">' + p.type + '</span></div>';
  document.getElementById('detailAttrs').innerHTML = html;
  // hide attrs card if empty
  document.getElementById('detailAttrs').style.display = html ? '' : 'none';

  document.getElementById('btnPrev').disabled = curIdx <= 0;
  document.getElementById('btnNext').disabled = curIdx >= items.length - 1;

  var btn = document.getElementById('addBtn');
  btn.textContent = '×”×•×¡×£ ×œ×¡×œ';
  btn.classList.remove('added');
}

document.getElementById('btnPrev').addEventListener('click', function(){
  if (curIdx > 0) { curIdx--; renderDetail(); }
});
document.getElementById('btnNext').addEventListener('click', function(){
  if (curIdx < DATA[curCat].items.length - 1) { curIdx++; renderDetail(); }
});
document.getElementById('addBtn').addEventListener('click', function(){
  var p = DATA[curCat].items[curIdx];
  cart.push(p);
  document.getElementById('cartBadge').textContent = cart.length;
  var btn = document.getElementById('addBtn');
  btn.textContent = 'âœ“ × ×•×¡×£ ×œ×¡×œ!';
  btn.classList.add('added');
  toast(p.n + ' × ×•×¡×£ ×œ×¡×œ');
  setTimeout(function(){ btn.textContent='×”×•×¡×£ ×œ×¡×œ'; btn.classList.remove('added'); }, 1800);
});

function showView(name) {
  var map = { cats:'viewCats', prods:'viewProds', detail:'viewDetail' };
  document.querySelectorAll('.view').forEach(function(v){ v.classList.remove('active'); });
  document.getElementById(map[name]).classList.add('active');
}
function viewCart() {
  if (!cart.length) { toast('×”×¡×œ ×¨×™×§'); return; }
  var total = cart.reduce(function(s,p){ return s+p.p; },0);
  alert('ğŸ›’ ×”×¡×œ ×©×œ×š:\n\n' + cart.map(function(p){ return p.n+' â€“ â‚ª'+p.p; }).join('\n') + '\n\n×¡×”"×›: â‚ª'+total);
}
function toast(msg) {
  var el = document.getElementById('toast');
  el.textContent = 'âœ“ ' + msg;
  el.classList.add('show');
  setTimeout(function(){ el.classList.remove('show'); }, 2000);
}
</script>
</body>
</html>××Ÿ ××ª ×”×§×•×“ ×©×œ×š

